<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ejercicio 4F - Trabajando con Imágenes - DBC</title>

    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }

      button {
        position: absolute;
        top: 30px;
        padding: 5px;
        background-color: rgb(31, 31, 31);
        color: rgb(219, 219, 219);
        border-radius: 8px;
        font-family: monospace;
        cursor: pointer;
      }

      #geologia {
        right: 150px;
      }

      #colorNatural {
        right: 30px;
      }
    </style>

    <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.34/esri/themes/dark/main.css"
    />
    <script src="https://js.arcgis.com/4.34/"></script>

    <script defer>
      // Paso 1: Importar las clases necesarias
      require([
        "esri/Map",
        "esri/views/MapView",
        "esri/layers/ImageryTileLayer",
      ], function (Map, MapView, ImageryTileLayer) {
        // Paso 2: Crear el mapa y la vista
        let map = new Map({
          basemap: "topo-vector",
        });

        let view = new MapView({
          container: "viewDiv",
          map: map,
          zoom: 11,
          center: [-16.44, 28.38],
        });

        // Paso 3: Consumir el servicio de imágenes
        let imagen = new ImageryTileLayer({
          url: "https://tiledimageservices1.arcgis.com/MPSkeshhtFz9vjCL/arcgis/rest/services/Imagen_Incendio_Canarias___Sentinel_2/ImageServer",
          bandIds: [3, 2, 0], // Color Natural
          effect: "brightness(400%) saturate(150%)",
        });

        // Paso 4: Añadir la capa al mapa
        map.add(imagen);

        // Paso 5: Crear los botones para cambiar de configuración de bandas
        const geologiaBoton = document.getElementById("geologia");
        const colorNaturalBoton = document.getElementById("colorNatural");

        geologiaBoton.addEventListener("click", () => {
          imagen.bandIds = [11, 10, 1]; // Combinación de Geología
        });

        colorNaturalBoton.addEventListener("click", () => {
          imagen.bandIds = [3, 2, 0]; // Combinación de Color Natural
        });
      });
    </script>
  </head>
  <body>
    <div id="viewDiv"></div>
    <button id="geologia">Geología</button>
    <button id="colorNatural">Color Natural</button>
  </body>
</html>
